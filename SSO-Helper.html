<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Thinkific SSO Conversation Helper</title>
    <style>
      :root {
        --bg: #f3f0ea;
        --card: #ffffff;
        --ink: #1d1a16;
        --muted: #6b665f;
        --accent: #c86b3c;
        --accent-dark: #a5532c;
        --chip: #efe6db;
        --shadow: 0 12px 40px rgba(27, 20, 10, 0.12);
        --radius: 20px;
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        font-family: "Space Grotesk", "Segoe UI", sans-serif;
        color: var(--ink);
        background: radial-gradient(circle at 20% 10%, #f6e9dc 0%, var(--bg) 45%, #efeae0 100%);
        min-height: 100vh;
      }

      .page {
        max-width: 1100px;
        margin: 0 auto;
        padding: 48px 20px 56px;
      }

      header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 24px;
      }

      .header-actions {
        display: flex;
        gap: 10px;
      }

      .brand {
        font-size: 18px;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        color: var(--muted);
      }

      .restart {
        background: none;
        border: none;
        color: var(--accent-dark);
        font-weight: 600;
        cursor: pointer;
        padding: 8px 10px;
        border-radius: 999px;
        transition: background 0.2s ease;
      }

      .restart[disabled] {
        cursor: not-allowed;
        opacity: 0.45;
      }

      .restart:hover,
      .restart:focus-visible {
        background: #f7e1d3;
        outline: none;
      }

      .layout {
        display: grid;
        grid-template-columns: minmax(0, 1fr) 320px;
        gap: 24px;
      }

      .card {
        background: var(--card);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        padding: 28px 28px 32px;
        display: flex;
        flex-direction: column;
        gap: 18px;
        position: relative;
        overflow: hidden;
      }

      .card::after {
        content: "";
        position: absolute;
        inset: auto -40% -60% -40%;
        height: 180px;
        background: radial-gradient(circle at 50% 0%, rgba(200, 107, 60, 0.12), transparent 70%);
      }

      .progress {
        font-size: 13px;
        text-transform: uppercase;
        letter-spacing: 0.12em;
        color: var(--muted);
      }

      .chips {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }

      .chip {
        background: var(--chip);
        padding: 6px 12px;
        border-radius: 999px;
        font-size: 13px;
        color: var(--muted);
      }

      h1 {
        font-size: 26px;
        margin: 0;
      }

      .prompt {
        font-size: 18px;
        margin: 0;
        line-height: 1.5;
      }

      .info {
        margin: 0;
        padding-left: 18px;
        color: var(--muted);
      }

      .info li {
        margin-bottom: 6px;
      }

      .options {
        display: grid;
        gap: 12px;
      }

      .option-btn {
        text-align: left;
        border: 1px solid #e4d8cc;
        border-radius: 14px;
        padding: 14px 16px;
        background: #fffaf5;
        cursor: pointer;
        font-size: 16px;
        font-weight: 600;
        color: var(--ink);
        transition: transform 0.15s ease, border 0.15s ease, box-shadow 0.15s ease;
      }

      .option-btn:hover,
      .option-btn:focus-visible {
        transform: translateY(-1px);
        border-color: var(--accent);
        box-shadow: 0 8px 18px rgba(200, 107, 60, 0.18);
        outline: none;
      }

      .recommendation {
        background: #fff1e7;
        border-radius: 16px;
        padding: 16px;
        border: 1px solid #f1c5ae;
      }

      .recommendation h3 {
        margin: 0 0 6px;
        font-size: 18px;
      }

      .rec-points {
        margin: 10px 0 0;
        padding-left: 18px;
        color: var(--muted);
      }

      .rec-points li {
        margin-bottom: 6px;
      }

      .rec-heading {
        list-style: none;
        list-style-type: none;
        margin-left: -18px;
        font-weight: 700;
        color: var(--ink);
        margin-top: 10px;
      }

      .rec-heading::marker {
        content: "";
      }

      .tag {
        display: inline-block;
        margin-top: 8px;
        padding: 4px 10px;
        border-radius: 999px;
        background: var(--accent);
        color: white;
        font-size: 12px;
        letter-spacing: 0.08em;
        text-transform: uppercase;
      }

      .panel {
        background: var(--card);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        padding: 22px 20px;
        display: none;
        flex-direction: column;
        gap: 14px;
        height: fit-content;
      }

      .panel.visible {
        display: flex;
      }

      .panel h2 {
        font-size: 16px;
        letter-spacing: 0.1em;
        text-transform: uppercase;
        color: var(--muted);
        margin: 0;
      }

      .talking-points {
        margin: 0;
        padding-left: 18px;
      }

      .talking-points li {
        margin-bottom: 8px;
      }

      footer {
        margin-top: 28px;
        display: flex;
        gap: 16px;
        color: var(--muted);
        font-size: 14px;
      }

      footer a {
        color: var(--muted);
        text-decoration: none;
      }

      footer a:hover {
        color: var(--accent-dark);
      }

      @media (max-width: 900px) {
        .layout {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="page">
      <header>
        <div class="brand">Thinkific SSO Conversation Helper</div>
        <div class="header-actions">
          <button class="restart" type="button" id="backBtn">Back</button>
          <button class="restart" type="button" id="restartBtn">Start over</button>
        </div>
      </header>

      <main class="layout">
        <section class="card" aria-live="polite" aria-atomic="true" id="mainCard">
          <div class="progress" id="progressLabel">Question 1</div>
          <div class="chips" id="breadcrumbs"></div>
          <h1 id="title"></h1>
          <p class="prompt" id="prompt"></p>
          <ul class="info" id="infoList"></ul>
          <div class="recommendation" id="recommendation" hidden>
            <h3 id="recHeadline"></h3>
            <p id="recSummary"></p>
            <ul class="rec-points" id="recPoints"></ul>
            <div class="tag" id="recTag"></div>
          </div>
          <div class="options" id="options"></div>
        </section>

        <aside class="panel" id="talkingPanel">
          <h2>Talking points saved</h2>
          <ul class="talking-points" id="talkingPoints"></ul>
        </aside>
      </main>

      <footer>
        <a href="https://support.thinkific.dev/hc/en-us/articles/4423909018135-Custom-SSO-Using-JWT" target="_blank" rel="noopener">Custom SSO help article ↗</a>
        <a href="https://support.thinkific.com/hc/en-us/articles/4412003630871-OpenID-Connect-SSO" target="_blank" rel="noopener">OpenID Connect SSO help article ↗</a>
      </footer>
    </div>

    <script>
      const FLOW = {
        start: {
          id: "start",
          title: "SSO Discovery",
          prompt: "How do learners get access to your training today?",
          info: [
            "Goal: uncover the user login journey before introducing SSO.",
            "Keep it collaborative — ask, don’t tell.",
            "SSO is about using an organization-managed identity provider."
          ],
          options: [
            { id: "opt1", label: "They log in directly to the training platform", next: "direct_login" },
            {
              id: "opt2",
              label: "They log in somewhere else first (portal, app, intranet, website)",
              next: "login_elsewhere"
            },
            {
              id: "opt3",
              label: "They log in with social accounts (Google, Facebook, etc.)",
              next: "social_login"
            },
            { id: "opt4", label: "We don’t have learners yet / still designing this", next: "still_designing" },
            { id: "opt5", label: "Not sure yet", next: "not_sure_entry" }
          ]
        },
        social_login: {
          id: "social_login",
          title: "Social login clarification",
          prompt: "Thanks — quick clarification on social login versus SSO.",
          info: [
            "Social login (Google/Facebook/etc.) is not SSO in the enterprise sense.",
            "SSO typically refers to identity providers managed by an organization.",
            "Social login is consumer-focused and rarely satisfies IT policy requirements."
          ],
          options: [{ id: "opt1", label: "Continue discovery", next: "direct_login" }]
        },
        login_elsewhere: {
          id: "login_elsewhere",
          title: "Learners log in somewhere else first",
          prompt: "What do they log into first?",
          info: [
            "This is a strong signal that seamless access may matter.",
            "SSO can reduce repeated logins across systems."
          ],
          options: [
            {
              id: "opt1",
              label: "A company portal or internal system",
              next: "multi_systems",
              notes: ["Likely internal IT team involvement."]
            },
            {
              id: "opt2",
              label: "A customer-facing app or website",
              next: "multi_systems",
              notes: ["Consider whether learners expect to stay logged in across systems."]
            },
            {
              id: "opt3",
              label: "A school or university system",
              next: "multi_systems",
              notes: ["May involve multiple identity providers."]
            },
            {
              id: "opt4",
              label: "Multiple systems, depending on the user",
              next: "multi_systems",
              notes: ["Multiple user groups often means multiple identity providers."]
            },
            {
              id: "opt5",
              label: "Not sure (IT team manages this)",
              next: "multi_systems",
              notes: ["Bring the IT team into discovery early."]
            }
          ]
        },
        seamless_expectation: {
          id: "seamless_expectation",
          title: "Login experience expectation",
          prompt: "After logging in there, what do you want the Thinkific experience to feel like?",
          info: [
            "If they don’t want a second login, that’s where SSO typically comes in.",
            "A second login can create friction that impacts completion."
          ],
          options: [
            {
              id: "opt1",
              label: "They shouldn’t have to log in again",
              next: "introduce_sso",
              notes: ["Soft intro: describe using the same login they already use."]
            },
            {
              id: "opt2",
              label: "It’s okay if they log in separately",
              next: "likely_no_sso",
              notes: ["SSO may be unnecessary complexity right now."]
            },
            {
              id: "opt3",
              label: "We haven’t thought about that yet",
              next: "clarify_priority",
              notes: ["Explore whether frictionless access is important."]
            }
          ]
        },
        direct_login: {
          id: "direct_login",
          title: "Thinkific as the primary login",
          prompt: "Will Thinkific be the main place users manage their account?",
          info: [
            "If Thinkific is the primary system, SSO is often not required at launch.",
            "Native login is the fastest way to launch and test adoption."
          ],
          options: [
            { id: "opt1", label: "Yes, Thinkific will be the main system", next: "compliance_check" },
            { id: "opt2", label: "No, it’s one part of a bigger ecosystem", next: "ecosystem" },
            { id: "opt3", label: "Not sure yet", next: "still_designing" }
          ]
        },
        compliance_check: {
          id: "compliance_check",
          title: "Security & compliance",
          prompt: "Are there any security or compliance requirements around login?",
          info: [
            "SSO is most common when IT requirements exist.",
            "Compliance needs often require centralized authentication and audit trails."
          ],
          options: [
            {
              id: "opt1",
              label: "Yes",
              next: "introduce_sso",
              notes: ["Likely need Solutions Engineering team involvement to confirm requirements."]
            },
            {
              id: "opt2",
              label: "Possibly, but unclear",
              next: "clarify_priority",
              notes: ["Clarify whether SSO is required or simply preferred."]
            },
            {
              id: "opt3",
              label: "No",
              next: "recommend_no_sso",
              notes: ["Proceed without SSO and revisit later if needed."]
            }
          ]
        },
        ecosystem: {
          id: "ecosystem",
          title: "Part of a larger ecosystem",
          prompt: "Do users already have accounts in another tool or system?",
          info: [
            "If users authenticate elsewhere, SSO may be worth exploring.",
            "Ask how accounts are provisioned or created today."
          ],
          options: [
            { id: "opt1", label: "Yes", next: "introduce_sso" },
            { id: "opt2", label: "No", next: "recommend_no_sso" },
            { id: "opt3", label: "Not sure", next: "it_involved" }
          ]
        },
        multi_systems: {
          id: "multi_systems",
          title: "Multiple systems / user groups",
          prompt:
            "Do different groups of users log in different ways, or does each client bring their own login?",
          info: [
            "Multiple user groups can indicate multiple identity providers.",
            "If each client has their own login, this can mean a separate SSO per client.",
            "Multi-IDP setups usually require more coordination and testing."
          ],
          options: [
            {
              id: "opt1",
              label: "Different groups, same login",
              next: "it_involved",
              notes: ["Single-provider SSO is more straightforward."]
            },
            {
              id: "opt2",
              label: "Each client brings their own login",
              next: "advanced_flag",
              notes: ["Multi-IDP scenario — align early with Solutions Engineering."]
            },
            { id: "opt3", label: "Not sure yet", next: "it_involved" }
          ]
        },
        it_involved: {
          id: "it_involved",
          title: "Client IT team involvement",
          prompt: "Is the client’s IT team involved in how users log in?",
          info: [
            "When the client’s IT team owns authentication, confirm requirements before promising anything.",
            "Identify the identity provider early (Okta, Azure AD, ADFS, etc.).",
            "Provisioning and access workflows can change scope and timeline."
          ],
          options: [
            {
              id: "opt1",
              label: "Yes",
              next: "introduce_sso",
              notes: ["Next: align on provider and required experience."]
            },
            {
              id: "opt2",
              label: "Not yet, but likely",
              next: "clarify_priority",
              notes: ["Suggest adding the Solutions Engineering team to the next call."]
            },
            { id: "opt3", label: "No", next: "likely_no_sso" }
          ]
        },
        clarify_priority: {
          id: "clarify_priority",
          title: "Clarify what matters most",
          prompt: "Which is most important right now?",
          info: [
            "Avoid over-scoping until the priority is clear.",
            "Security alignment can add time, while simplicity speeds launch."
          ],
          options: [
            {
              id: "opt1",
              label: "Fast launch and simplicity",
              next: "recommend_no_sso",
              notes: ["SSO can be added later if needed."]
            },
            {
              id: "opt2",
              label: "Security/compliance alignment",
              next: "introduce_sso",
              notes: ["Confirm SSO requirements with the Solutions Engineering team."]
            },
            {
              id: "opt3",
              label: "Best learner experience (no extra logins)",
              next: "introduce_sso",
              notes: ["Smooth login is a common SSO driver."]
            }
          ]
        },
        still_designing: {
          id: "still_designing",
          title: "Design not finalized",
          prompt: "Do you expect learners to already be logged into another system when they arrive?",
          info: [
            "This helps decide whether SSO should be in scope now or later.",
            "If no existing identity provider, SSO is often a later phase."
          ],
          options: [
            { id: "opt1", label: "Yes", next: "introduce_sso" },
            { id: "opt2", label: "No", next: "recommend_no_sso" },
            { id: "opt3", label: "Not sure", next: "likely_no_sso" }
          ]
        },
        not_sure_entry: {
          id: "not_sure_entry",
          title: "Quick triage",
          prompt: "What’s the audience type?",
          info: [
            "Internal audiences are more likely to require Solutions Engineering team involvement for login.",
            "External audiences may prioritize ease of access over strict identity policies."
          ],
          options: [
            { id: "opt1", label: "Internal employees", next: "it_involved" },
            { id: "opt2", label: "External customers/partners", next: "ecosystem" },
            { id: "opt3", label: "Mixed audience", next: "multi_systems" }
          ]
        },
        likely_no_sso: {
          id: "likely_no_sso",
          title: "SSO might be unnecessary right now",
          info: [
            "Thinkific works great without SSO. Only add it when you truly need it.",
            "You can move faster now and revisit once requirements are clear."
          ],
          endRecommendation: {
            headline: "Recommendation: Launch without SSO for now",
            summary:
              "Based on the current user flow, SSO may add complexity without clear benefit. Revisit if IT/compliance or seamless access becomes a requirement.",
            tag: "No SSO Yet"
          },
          options: []
        },
        advanced_flag: {
          id: "advanced_flag",
          title: "Potential advanced scenario",
          info: [
            "Multiple identity providers can require advanced SSO approaches or middleware.",
            "Don’t over-promise — validate with the Solutions Engineering team.",
            "Multiple IDPs can require custom routing or middleware.",
            "Send the SSO Questionnaire to the client: https://docs.google.com/document/d/1Zy-wM3qCz8IV6bI9QBhX1MLgY-XKxXSm3TP5jFmxi2c/edit?tab=t.28f6x4idxjz"
          ],
          endRecommendation: {
            headline: "Recommendation: Deeper discovery with Solutions Engineering",
            summary:
              "This sounds like a multi-system or multi-provider setup. Bring the Solutions Engineering team into the next call and document requirements before scoping SSO.",
            tag: "Advanced"
          },
          options: []
        },
        introduce_sso: {
          id: "introduce_sso",
          title: "Introduce SSO (plain language)",
          prompt:
            "Would it help if learners could access Thinkific using the same login they already use elsewhere?",
          info: [
            "SSO is a Plus feature and is most common when Solutions Engineering requirements exist.",
            "SSO is not social login (Google/Facebook/etc.).",
            "SSO typically relies on a client-managed identity provider."
          ],
          options: [
            {
              id: "opt1",
              label: "Yes, that’s important",
              next: "sso_next_steps",
              notes: ["Confirm the identity provider and involve the Solutions Engineering team early."]
            },
            {
              id: "opt2",
              label: "Nice to have, but not critical",
              next: "recommend_no_sso",
              notes: ["De-scope for launch, revisit later."]
            },
            { id: "opt3", label: "No", next: "recommend_no_sso" }
          ]
        },
        sso_next_steps: {
          id: "sso_next_steps",
          title: "Scope the next step",
          info: [
            "SSO is exclusively available for Plus customers.",
            "Typical implementation timeline is depending on complexity and readiness.",
            "If multiple identity providers are needed, advanced options or middleware may be required.",
            "Expect coordination across IT, security, and learner experience owners.",
            "Send the SSO Questionnaire to the client"
          ],
          endRecommendation: {
            headline: "Recommendation: Validate requirements + involve Solutions Engineering",
            summary:
              "Next step is to confirm the identity provider(s), desired login experience, and whether there are multiple user groups. Then scope the right SSO approach.",
            tag: "SSO Fit"
          },
          options: [
            {
              id: "opt1",
              label: "Open Custom SSO Help Article ↗",
              href: "https://support.thinkific.dev/hc/en-us/articles/4423909018135-Custom-SSO-Using-JWT"
            },
            {
              id: "opt3",
              label: "Open OoenID Connect SSO Help Article ↗",
              href: "https://support.thinkific.com/hc/en-us/articles/4412003630871-OpenID-Connect-SSO"
            },
            {
              id: "opt2",
              label: "Send SSO Questionnaire ↗",
              href: "https://docs.google.com/document/d/1Zy-wM3qCz8IV6bI9QBhX1MLgY-XKxXSm3TP5jFmxi2c/edit?tab=t.28f6x4idxjz"
            }
          ]
        },
        recommend_no_sso: {
          id: "recommend_no_sso",
          title: "Proceed without SSO",
          info: [
            "Thinkific works great without SSO. Only add it when you truly need it.",
            "Revisit SSO later if Solutions Engineering requirements emerge or users already authenticate elsewhere.",
            "Document triggers for revisiting SSO as the program scales."
          ],
          endRecommendation: {
            headline: "Recommendation: Proceed without SSO (for now)",
            summary:
              "Based on what we know today, SSO doesn’t appear required for launch. Start simple and add SSO later if a clear driver emerges.",
            tag: "Proceed",
            sections: [
              {
                heading: "Why this approach works now:",
                bullets: [
                  "Thinkific works great without SSO when it’s the primary login.",
                  "Faster launch by avoiding added technical setup and cross-team dependencies.",
                  "You can add SSO later if requirements change."
                ]
              },
              {
                heading: "Why teams add SSO as they scale:",
                bullets: [
                  "Seamless learner access across systems (no second login).",
                  "Reduced support tickets from password resets / duplicate logins.",
                  "Centralized security and compliance alignment via your identity provider.",
                  "Consistent authentication experience across tools."
                ]
              }
            ]
          },
          options: []
        }
      };

      const state = {
        currentId: "start",
        breadcrumbs: [],
        talkingPoints: new Set(),
        talkingTimeline: [],
        history: []
      };

      const elements = {
        progressLabel: document.getElementById("progressLabel"),
        breadcrumbs: document.getElementById("breadcrumbs"),
        title: document.getElementById("title"),
        prompt: document.getElementById("prompt"),
        infoList: document.getElementById("infoList"),
        options: document.getElementById("options"),
        recommendation: document.getElementById("recommendation"),
        recHeadline: document.getElementById("recHeadline"),
        recSummary: document.getElementById("recSummary"),
        recPoints: document.getElementById("recPoints"),
        recTag: document.getElementById("recTag"),
        talkingPanel: document.getElementById("talkingPanel"),
        talkingPoints: document.getElementById("talkingPoints"),
        restartBtn: document.getElementById("restartBtn"),
        backBtn: document.getElementById("backBtn")
      };

      function renderNode() {
        const node = FLOW[state.currentId];
        elements.title.textContent = node.title || "";
        elements.prompt.textContent = node.prompt || "";

        elements.progressLabel.textContent = node.endRecommendation
          ? "Recommendation"
          : `Question ${Math.max(1, state.breadcrumbs.length + 1)}`;

        elements.breadcrumbs.innerHTML = "";
        state.breadcrumbs.forEach((label) => {
          const chip = document.createElement("span");
          chip.className = "chip";
          chip.textContent = label;
          elements.breadcrumbs.appendChild(chip);
        });

        elements.infoList.innerHTML = "";
        if (node.info && node.info.length) {
          node.info.forEach((item) => {
            const li = document.createElement("li");
            if (item.includes("SSO Questionnaire")) {
              li.innerHTML = item.replace(
                "SSO Questionnaire",
                '<a href="https://docs.google.com/document/d/1Zy-wM3qCz8IV6bI9QBhX1MLgY-XKxXSm3TP5jFmxi2c/edit?tab=t.28f6x4idxjz" target="_blank" rel="noopener">SSO Questionnaire</a>'
              );
            } else {
              li.textContent = item;
            }
            elements.infoList.appendChild(li);
          });
          elements.infoList.hidden = false;
        } else {
          elements.infoList.hidden = true;
        }

        if (node.endRecommendation) {
          elements.recommendation.hidden = false;
          elements.recHeadline.textContent = node.endRecommendation.headline;
          elements.recSummary.textContent = node.endRecommendation.summary;
          elements.recTag.textContent = node.endRecommendation.tag;
          elements.recPoints.innerHTML = "";
          const rec = node.endRecommendation;
          if (rec.sections && rec.sections.length) {
            rec.sections.forEach((section) => {
              const heading = document.createElement("li");
              heading.className = "rec-heading";
              heading.textContent = section.heading;
              elements.recPoints.appendChild(heading);
              section.bullets.forEach((point) => {
                const li = document.createElement("li");
                li.textContent = point;
                elements.recPoints.appendChild(li);
              });
            });
            elements.recPoints.hidden = false;
          } else if (rec.bullets && rec.bullets.length) {
            rec.bullets.forEach((point) => {
              const li = document.createElement("li");
              li.textContent = point;
              elements.recPoints.appendChild(li);
            });
            elements.recPoints.hidden = false;
          } else {
            elements.recPoints.hidden = true;
          }
        } else {
          elements.recommendation.hidden = true;
        }

        elements.backBtn.disabled = state.history.length === 0;

        elements.options.innerHTML = "";
        node.options.forEach((option) => {
          const button = document.createElement("button");
          button.type = "button";
          button.className = "option-btn";
          button.textContent = option.label;
          button.addEventListener("click", () => handleOptionSelection(node, option));
          elements.options.appendChild(button);
        });
      }

      function handleOptionSelection(node, option) {
        if (option.href) {
          window.open(option.href, "_blank", "noopener");
          return;
        }

        state.history.push(snapshotState());
        state.breadcrumbs.push(option.label);
        addTalkingPoints(node.info, option.notes);

        if (option.next) {
          state.currentId = option.next;
          renderNode();
        }
      }

      function snapshotState() {
        return {
          currentId: state.currentId,
          breadcrumbs: [...state.breadcrumbs],
          talkingPoints: new Set(state.talkingPoints),
          talkingTimeline: [...state.talkingTimeline]
        };
      }

      function restoreState(snapshot) {
        state.currentId = snapshot.currentId;
        state.breadcrumbs = [...snapshot.breadcrumbs];
        state.talkingPoints = new Set(snapshot.talkingPoints);
        state.talkingTimeline = [...snapshot.talkingTimeline];
        renderTalkingPoints();
        renderNode();
      }

      function goBack() {
        const previous = state.history.pop();
        if (!previous) {
          return;
        }
        restoreState(previous);
      }

      function addTalkingPoints(nodeInfo = [], optionNotes = []) {
        const additions = [...(nodeInfo || []), ...(optionNotes || [])];
        additions.forEach((point) => {
          if (!state.talkingPoints.has(point)) {
            state.talkingPoints.add(point);
            state.talkingTimeline.push(point);
          }
        });
        renderTalkingPoints();
      }

      function renderTalkingPoints() {
        elements.talkingPoints.innerHTML = "";
        state.talkingTimeline.forEach((point) => {
          const li = document.createElement("li");
          li.textContent = point;
          elements.talkingPoints.appendChild(li);
        });
        elements.talkingPanel.classList.toggle("visible", state.talkingTimeline.length > 0);
      }

      function reset() {
        state.currentId = "start";
        state.breadcrumbs = [];
        state.talkingPoints.clear();
        state.talkingTimeline = [];
        state.history = [];
        renderTalkingPoints();
        renderNode();
      }

      document.addEventListener("keydown", (event) => {
        if (event.key.toLowerCase() === "r") {
          reset();
        }
      });

      elements.restartBtn.addEventListener("click", reset);
      elements.backBtn.addEventListener("click", goBack);

      renderNode();
    </script>
  </body>
</html>
